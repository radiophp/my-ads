# =======================================
# Non-secret environment variables
# =======================================

NODE_ENV=production
APP_HOST=0.0.0.0
APP_PORT=6300
APP_GLOBAL_PREFIX=api

POSTGRES_DB=mahan_file
POSTGRES_USER=mahan_admin
POSTGRES_PORT=6301

REDIS_HOST=redis
REDIS_PORT=6302
REDIS_DB=0
REDIS_TLS=false
REDIS_KEY_PREFIX=mahan-file:

RABBITMQ_HOST=rabbitmq
RABBITMQ_QUEUE_PREFIX=mahan-file
RABBITMQ_PREFETCH=25
RABBITMQ_HEARTBEAT=60
RABBITMQ_RECONNECT_SECONDS=5
RABBITMQ_PORT=6313
RABBITMQ_MANAGEMENT_PORT=6314
RABBITMQ_USERNAME=mahan_worker

MINIO_ENDPOINT=minio
MINIO_PORT=6304
MINIO_CONSOLE_PORT=6305
MINIO_USE_SSL=false
MINIO_BUCKET=mahan-file-uploads
MINIO_REGION=ir-tehran-1

CORS_ORIGIN=https://mahan.toncloud.observer
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=240
OTP_TTL_SECONDS=300
OTP_DIGITS=6

OTEL_ENABLED=false
OTEL_SERVICE_NAME=mahan-file-api
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:6317/v1/traces
OTEL_EXPORTER_OTLP_HEADERS=
OTEL_LOG_LEVEL=error

LOG_LEVEL=info
LOG_PRETTY=false
PRISMA_LOG_QUERIES=false

NEXT_UI_PORT=6305
NEXT_PUBLIC_APP_URL=https://mahan.toncloud.observer
NEXT_PUBLIC_API_BASE_URL=https://mahan.toncloud.observer/api

API_IMAGE=ghcr.io/toncloud/mahan-file-api
API_IMAGE_TAG=stable
UI_IMAGE=ghcr.io/toncloud/mahan-file-ui
UI_IMAGE_TAG=stable
API_REPLICAS=2
UI_REPLICAS=2

# =======================================
# Secrets (store in GitHub Actions secrets)
# =======================================

POSTGRES_PASSWORD=zQ5gG7k3S9nK2bFw
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:${POSTGRES_PORT}/${POSTGRES_DB}?schema=public
DATABASE_DIRECT_URL=${DATABASE_URL}

REDIS_PASSWORD= # (only if protected Redis; keep blank otherwise)

RABBITMQ_PASSWORD=pV4hN1cLm2Xy8QwE
RABBITMQ_URL=amqp://${RABBITMQ_USERNAME}:${RABBITMQ_PASSWORD}@${RABBITMQ_HOST}:${RABBITMQ_PORT}

MINIO_ACCESS_KEY=mahanfileaccess
MINIO_SECRET_KEY=Z1x8dR5tC3nMm9pV

JWT_ACCESS_TOKEN_SECRET=8b4e1d6f3c2a9974bb1f6b80ec72dfb0
JWT_REFRESH_TOKEN_SECRET=5d7f2c4b1a9e3f6d8c1b0a7e5f2d4c6a

OTP_SENDER_BASE_URL=https://notify.mahanfile.ir/api/otp/send
OTP_SENDER_API_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.otp.mahanfile.token

NEXT_PUBLIC_ANALYTICS_WRITE_KEY=mahanfile-analytics-key-2025

OTEL_EXPORTER_OTLP_HEADERS= # add when tracing vendor requires authentication
